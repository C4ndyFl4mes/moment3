{"mappings":"C,A,eCGI,EAHJ,IAAM,EAAmB,SAAS,cAAc,CAAC,UAC3C,EAAmB,SAAS,cAAc,CAAC,kBAC3C,EAAY,SAAS,cAAc,CAAC,OAsC1C,eAAe,EAAoB,CAAK,EACpC,GAAI,CACA,IAAM,EAAO,MAAM,MAAM,CAAC,6CAA6C,EAAE,EAAM,WAAW,GAAG,YAAY,CAAC,EACpG,EAAO,MAAM,EAAK,IAAI,GAEtB,EAAS,EAAE,CASjB,OARA,EAAK,OAAO,CAAC,AAAA,IACT,EAAO,IAAI,CAAC,CACR,KAAM,EAAE,YAAY,CACpB,IAAK,EAAE,GAAG,CACV,IAAK,EAAE,GAAG,CACV,KAAM,EAAE,WAAW,AACvB,EACJ,GACO,CACX,CAAE,MAAM,EAAO,CACX,QAAQ,KAAK,CAAC,EAClB,CACJ,CArDA,EAAiB,gBAAgB,CAAC,QAKlC,WACI,aAAa,GACb,EAAU,WAAW,cAUE,EAAA,EATJ,MAAM,EAAoB,EAAiB,KAAK,CAAC,IAAI,IAUxE,EAAiB,SAAS,CAAG,GAC7B,EAAO,OAAO,CAAC,AAAA,IACX,IAAM,EAAgB,SAAS,aAAa,CAAC,MAC7C,CAAA,EAAc,SAAS,CAAG,cAC1B,EAAc,SAAS,CAAG,CAAC,4BAA4B,EAAE,EAAM,IAAI,CAAC,sCAAsC,EAAE,EAAM,GAAG,CAAC,WAAW,EAAE,EAAM,GAAG,CAAC,IAAI,CAAC,CAClJ,EAAc,gBAAgB,CAAC,QAAS,KAoC5C,EAAU,YAAY,CAAC,MAAO,CAAC,qDAAqD,EAAE,AAnCpE,EAmC0E,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,AAnCvF,EAmC6F,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,AAnC1G,EAmCgH,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,AAnC7H,EAmCmI,IAAI,CAAC,EAAE,CAAC,qBAAqB,EAAE,AAnClK,EAmCwK,GAAG,CAAC,GAAG,EAAE,AAnCjL,EAmCuL,GAAG,CAAA,CAAE,CAlC1M,GACA,EAAiB,WAAW,CAAC,EACjC,EAjBA,EAAG,IACP,E","sources":["<anon>","src/scripts/map.js"],"sourcesContent":["(function () {\nvar $491422396651946f$exports = {};\nconst $491422396651946f$var$searchPlaceINPUT = document.getElementById(\"search\");\nconst $491422396651946f$var$searchResultsDIV = document.getElementById(\"search-results\");\nconst $491422396651946f$var$mapIFRAME = document.getElementById(\"map\");\nlet $491422396651946f$var$timeout;\n$491422396651946f$var$searchPlaceINPUT.addEventListener(\"input\", $491422396651946f$var$search);\n/**\r\n * Sök efter plats, anropas av input av elementet med ID:et search.\r\n */ function $491422396651946f$var$search() {\n    clearTimeout($491422396651946f$var$timeout);\n    $491422396651946f$var$timeout = setTimeout(async ()=>{\n        const places = await $491422396651946f$var$getPlacesFromSearch($491422396651946f$var$searchPlaceINPUT.value.trim());\n        $491422396651946f$var$listSearchResults(places);\n    }, 500);\n}\n/**\r\n * Listar sökresultat.\r\n * @param {array} places - En array av platser\r\n */ function $491422396651946f$var$listSearchResults(places) {\n    $491422396651946f$var$searchResultsDIV.innerHTML = \"\";\n    places.forEach((place)=>{\n        const resultItemDIV = document.createElement(\"div\");\n        resultItemDIV.className = \"result-item\";\n        resultItemDIV.innerHTML = `<p class=place-name><strong>${place.name}</strong></p><p class=coords>Latitud: ${place.lat} Longitud: ${place.lon}</p>`;\n        resultItemDIV.addEventListener(\"click\", ()=>{\n            $491422396651946f$var$renderMap(place);\n        });\n        $491422396651946f$var$searchResultsDIV.appendChild(resultItemDIV);\n    });\n}\n/**\r\n * Hämtar platsers namn och koordinater.\r\n * @param {string} query - Söksträngen\r\n * @returns {array} places - En array av objekt som har egenskaperna name, lat, lon och bbox. bbox är kartans hörn.\r\n */ async function $491422396651946f$var$getPlacesFromSearch(query) {\n    try {\n        const resp = await fetch(`https://nominatim.openstreetmap.org/search?q=${query.toLowerCase()}&format=json`);\n        const data = await resp.json();\n        const places = [];\n        data.forEach((d)=>{\n            places.push({\n                name: d.display_name,\n                lat: d.lat,\n                lon: d.lon,\n                bbox: d.boundingbox\n            });\n        });\n        return places;\n    } catch (error) {\n        console.error(error);\n    }\n}\n/**\r\n * Renderar karta.\r\n * @param {array} place - vilken plats som ska visas på kartan.\r\n */ function $491422396651946f$var$renderMap(place) {\n    $491422396651946f$var$mapIFRAME.setAttribute(\"src\", `https://www.openstreetmap.org/export/embed.html?bbox=${place.bbox[2]}%2C${place.bbox[0]}%2C${place.bbox[3]}%2C${place.bbox[1]}&layer=mapnik&marker=${place.lat}%2C${place.lon}`);\n}\n\n})();\n//# sourceMappingURL=map.c6abceb2.js.map\n","const searchPlaceINPUT = document.getElementById(\"search\");\r\nconst searchResultsDIV = document.getElementById(\"search-results\");\r\nconst mapIFRAME = document.getElementById(\"map\");\r\nlet timeout;\r\n\r\nsearchPlaceINPUT.addEventListener(\"input\", search);\r\n\r\n/**\r\n * Sök efter plats, anropas av input av elementet med ID:et search.\r\n */\r\nfunction search() {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(async () => {\r\n        const places = await getPlacesFromSearch(searchPlaceINPUT.value.trim());\r\n        listSearchResults(places);\r\n    }, 500);\r\n}\r\n\r\n/**\r\n * Listar sökresultat.\r\n * @param {array} places - En array av platser\r\n */\r\nfunction listSearchResults(places) {\r\n    searchResultsDIV.innerHTML = \"\";\r\n    places.forEach(place => {\r\n        const resultItemDIV = document.createElement(\"div\");\r\n        resultItemDIV.className = \"result-item\";\r\n        resultItemDIV.innerHTML = `<p class=place-name><strong>${place.name}</strong></p><p class=coords>Latitud: ${place.lat} Longitud: ${place.lon}</p>`;\r\n        resultItemDIV.addEventListener(\"click\", () => {\r\n            renderMap(place);\r\n        });\r\n        searchResultsDIV.appendChild(resultItemDIV);\r\n    });\r\n}\r\n\r\n/**\r\n * Hämtar platsers namn och koordinater.\r\n * @param {string} query - Söksträngen\r\n * @returns {array} places - En array av objekt som har egenskaperna name, lat, lon och bbox. bbox är kartans hörn.\r\n */\r\nasync function getPlacesFromSearch(query) {\r\n    try {\r\n        const resp = await fetch(`https://nominatim.openstreetmap.org/search?q=${query.toLowerCase()}&format=json`);\r\n        const data = await resp.json();\r\n\r\n        const places = [];\r\n        data.forEach(d => {\r\n            places.push({\r\n                name: d.display_name,\r\n                lat: d.lat,\r\n                lon: d.lon,\r\n                bbox: d.boundingbox\r\n            });\r\n        });\r\n        return places;\r\n    } catch(error) {\r\n        console.error(error);\r\n    }\r\n}\r\n/**\r\n * Renderar karta.\r\n * @param {array} place - vilken plats som ska visas på kartan.\r\n */\r\nfunction renderMap(place) {\r\n    mapIFRAME.setAttribute(\"src\", `https://www.openstreetmap.org/export/embed.html?bbox=${place.bbox[2]}%2C${place.bbox[0]}%2C${place.bbox[3]}%2C${place.bbox[1]}&layer=mapnik&marker=${place.lat}%2C${place.lon}`);\r\n}"],"names":["$491422396651946f$var$timeout","$491422396651946f$var$searchPlaceINPUT","document","getElementById","$491422396651946f$var$searchResultsDIV","$491422396651946f$var$mapIFRAME","$491422396651946f$var$getPlacesFromSearch","query","resp","fetch","toLowerCase","data","json","places","forEach","d","push","name","display_name","lat","lon","bbox","boundingbox","error","console","addEventListener","clearTimeout","setTimeout","value","trim","innerHTML","place","resultItemDIV","createElement","className","setAttribute","appendChild"],"version":3,"file":"map.c6abceb2.js.map"}